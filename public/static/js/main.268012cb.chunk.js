(this.webpackJsonpamazon=this.webpackJsonpamazon||[]).push([[0],{106:function(e,t,a){e.exports=a(136)},115:function(e,t,a){},136:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(8),o=a.n(c),l=a(18),i=a(41),u=a(6),m=a(84),s=a(85),f=a.n(s),d=a(60),p=(a(115),a(173)),E=a(174),g=a(53),h=a(176),v=a(175);var b=function(){var e=Object(u.c)((function(e){return e.Cart.count}));return r.a.createElement("div",{style:{marginBottom:"5em"}},r.a.createElement(p.a,null,r.a.createElement(E.a,{variant:"dense"},r.a.createElement(g.a,{variant:"h6"},r.a.createElement(l.c,{to:"/"},r.a.createElement("img",{src:"/logo.png",width:"60",height:"60"}))),r.a.createElement(v.a,{style:{flexGrow:1}}),r.a.createElement(l.c,{to:"/login"},r.a.createElement(h.a,null,"Login")),r.a.createElement("h6",{style:{position:"relative",left:"-1.8em",color:"white"}},e||""))))},O=a(32),j=a(184),y=a(177),w=a(90),k=a.n(w),I=a(65),x=a.n(I),C=a(92),S=a.n(C),A=a(93),T=a.n(A),_=a(91),D=a.n(_),z=a(19),P=a.n(z),B=a(28),L=a(15),U=a.n(L),F="SET_ALERT",N="ITEMS_LOADED",R="ITEM_DELETED",M="ADD_ITEM",G="LOAD_ITEMS",W="ITEM_REMOVED",Y="SET_USER",q="USER_LOGOUT";function J(e,t){return{type:F,alert:{msg:e,sev:t}}}function $(e){return{type:N,data:e}}function H(e){return{type:R,id:e}}var V=null,X=null;function K(){return function(){var e=Object(B.a)(P.a.mark((function e(t){var a,n;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return X=localStorage.getItem("token"),e.next=3,U.a.get("/items",{headers:{Authorization:"Bearer ".concat(X)}});case 3:a=e.sent,n=a.data,V=n.length>0?n[n.length-1]._id:V,console.log(X),t($(Array.isArray(n)?n:[]));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}function Q(e){return function(t){U.a.get("/user/me",{headers:{Authorization:"Bearer ".concat(e)}}).then((function(e){t({type:Y,payload:e.data}),localStorage.setItem("token",e.data.Token)})).catch((function(e){return console.log(e)}))}}var Z=function(){var e=Object(u.c)((function(e){return e.Cart})),t=Object(u.c)((function(e){return e.User})),a=Object(n.useState)(""),c=Object(O.a)(a,2),o=c[0],i=c[1],m=Object(u.b)(),s=function(e){var t;m((t=e,function(){var e=Object(B.a)(P.a.mark((function e(a){var n,r;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return X=localStorage.getItem("token"),e.next=3,U.a.post("/items/search",{query:t},{headers:{Authorization:"Bearer ".concat(X)}});case 3:n=e.sent,0==(r=n.data).length?a(J("Item Not found","error")):a($(r));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))};return r.a.createElement("div",{style:{marginBottom:"5em"}},r.a.createElement(p.a,null,r.a.createElement(E.a,{variant:"dense"},r.a.createElement(l.c,{to:"/"},r.a.createElement("img",{src:"/logo.png",width:"60",height:"60"})),r.a.createElement(j.a,{style:{width:"50%",marginLeft:"2em"},onChange:function(e){return i(e.target.value)}}),r.a.createElement(y.a,{edge:"end",onClick:function(){return s(o)}},r.a.createElement(k.a,null)),r.a.createElement(v.a,{style:{flexGrow:1}}),r.a.createElement(l.c,{to:"/add"},r.a.createElement(y.a,null,r.a.createElement(D.a,null))),r.a.createElement(l.c,{to:"/profile"},r.a.createElement(y.a,null,r.a.createElement(S.a,null))),r.a.createElement(l.c,{to:"/checkout"},r.a.createElement(y.a,null,r.a.createElement(x.a,null))),r.a.createElement("h6",{style:{position:"relative",left:"-1.8em",color:"white"}},e.count||""),r.a.createElement(y.a,{onClick:function(){return m((e=t.Token,function(t){U.a.get("/user/logout",{headers:{Authorization:"Bearer ".concat(e)}}).then((function(e){t({type:q}),localStorage.removeItem("token"),t(J("You Logged out !","info"))})).catch((function(e){return console.log(e)}))}));var e}},r.a.createElement(T.a,null)))))};var ee=function(){var e=Object(u.c)((function(e){return e.User}));return r.a.createElement("div",null,e.Token?r.a.createElement(Z,null):r.a.createElement(b,null))},te=a(12);var ae=function(){var e=Object(u.c)((function(e){return e.Alert})),t=Object(d.b)().enqueueSnackbar;return Object(n.useEffect)((function(){e.msg&&e.sev&&t(e.msg,{variant:e.sev})}),[e,t]),null},ne=a(44),re=a(21),ce=a(97);var oe=function(e){var t=Object(n.useState)({user:"",pass:""}),a=Object(O.a)(t,2),c=a[0],o=a[1],l=Object(u.b)(),i=function(e){o(Object(re.a)(Object(re.a)({},c),{},Object(ne.a)({},e.target.name,e.target.value)))};return r.a.createElement(ce.a,{style:{margin:"10em auto ",width:"30%"},elevation:4},r.a.createElement(v.a,{container:!0,direction:"row",spacing:4,alignContent:"center"},r.a.createElement(v.a,{item:!0,xs:12},r.a.createElement(j.a,{fullWidth:!0,placeholder:"username",name:"user",value:c.user,variant:"outlined",onChange:i})),r.a.createElement(v.a,{item:!0,xs:12},r.a.createElement(j.a,{fullWidth:!0,placeholder:"password",type:"password",name:"pass",value:c.pass,variant:"outlined",onChange:i})),r.a.createElement(v.a,{item:!0},r.a.createElement(h.a,{variant:"contained",size:"medium",color:"primary",onClick:function(){var t,a,n=Object.values(c);l((t=n[0],a=n[1],function(){var e=Object(B.a)(P.a.mark((function e(n){var r,c;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,U.a.post("/user/login",{username:t,password:a});case 3:r=e.sent,c=r.data,console.log(c),c.token?(n(J("You logged in Successfuly","success")),localStorage.setItem("token",c.token),n(Q(c.token))):n(J("Invalid Login","error")),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),n(J("Somthing went wrong","error"));case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}())),e.history.push("/")}},"Login")," ",r.a.createElement(h.a,{variant:"contained",size:"medium",color:"secondary",onClick:function(){var e,t,a=Object.values(c);l((e=a[0],t=a[1],function(a){""!==e&&""!==t?U.a.post("/user/register",{username:e,password:t}).then((function(e){return a(J("User Created","info"))})).catch((function(e){return a(J("Please select another username","warning"))})):a(J("Please Fill user and pass fields","warning"))})),o({user:"",pass:""})}},"Register"))))},le=a(172),ie=a(186),ue=a(183),me=a(94),se=a.n(me),fe=a(59),de=a.n(fe);function pe(e){return{type:G,data:e}}var Ee=localStorage.getItem("token");function ge(e){return function(t){t(function(e){return{type:W,id:e}}(e)),t(J("Item Removed","warning")),U.a.delete("/cart/remove",{data:{itemId:e},headers:{Authorization:"Bearer ".concat(Ee)}}).then((function(e){return console.log(e.data)}))}}var he=a(178),ve=a(179),be=a(180),Oe=a(181),je=a(182);var ye=function(e){var t=e.item,a=e.owner,n=Object(u.b)();return r.a.createElement(he.a,null,r.a.createElement(ve.a,{title:t.ProductName,subheader:"Date: "+t.Date}),r.a.createElement(be.a,{style:{height:0,paddingTop:"100%"},image:t.Image,title:t.ProductName}),r.a.createElement(Oe.a,null,r.a.createElement(g.a,{variant:"body1"},t.Desc),a?r.a.createElement(r.a.Fragment,null,r.a.createElement("hr",null),"Your Item !"):r.a.createElement(r.a.Fragment,null,r.a.createElement("hr",null),"Listed By :"," ",r.a.createElement(l.b,{to:"/profile/".concat(t.Owner),style:{textDecoration:"none"}},t.Owner))),r.a.createElement(je.a,null,a?"":r.a.createElement(y.a,{onClick:function(){return n((e=t._id,function(){var t=Object(B.a)(P.a.mark((function t(a){return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,U.a.post("/cart/add",{itemId:e},{headers:{Authorization:"Bearer ".concat(Ee)}});case 2:a(J("Item Added","success")),a({type:M});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));var e}},r.a.createElement(se.a,null)),r.a.createElement(g.a,{variant:"h6"},t.Price,"$"),r.a.createElement(v.a,{style:{flexGrow:1}}),a?r.a.createElement(y.a,{style:{float:"right"},onClick:function(){return n((e=t._id,function(){var t=Object(B.a)(P.a.mark((function t(a){return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:X=localStorage.getItem("token"),a(J("Item Deleted","success")),a(H(e)),U.a.delete("/items/".concat(e.toString()),{headers:{Authorization:"Bearer ".concat(X)}});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));var e}},r.a.createElement(de.a,{color:"error"})):null))};var we=function(e){var t=Object(u.c)((function(e){return e.Items})),a=Object(u.c)((function(e){return e.User.username})),c=Object(u.b)();return Object(n.useEffect)((function(){c(K())}),[a]),a?a&&t.length>0?r.a.createElement(r.a.Fragment,null,r.a.createElement(v.a,{container:!0,spacing:8,alignContent:"center"},t.map((function(e){return r.a.createElement(le.a,{in:!0,key:e._id},r.a.createElement(v.a,{item:!0,xs:12,md:4,key:e._id},r.a.createElement(ye,{item:e,owner:e.Owner===a})))}))),t.length>9&&r.a.createElement(h.a,{style:{marginTop:"2em",marginLeft:"90vw"},onClick:function(){return c(function(){var e=Object(B.a)(P.a.mark((function e(t){var a,n;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return X=localStorage.getItem("token"),e.next=3,U.a.get("/items/".concat(V.toString()),{headers:{Authorization:"Bearer ".concat(X)}});case 3:a=e.sent,n=a.data,console.log(n),V=n[n.length-1]?n[n.length-1]._id:null,t($(n));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},color:"primary",variant:"contained"},"NEXT PAGE")):(console.log(t),"No avaiable Items "):r.a.createElement("div",{style:{marginTop:"20%",marginLeft:"auto",marginRight:"auto",width:"70%"}},r.a.createElement(ie.a,{severity:"info"},r.a.createElement(ue.a,null,"Information !"),"Please  ",r.a.createElement(l.c,{to:"/login"},"Login")," to use the app"))},ke=a(95),Ie=a.n(ke);var xe=function(e){var t=Object(n.useState)({}),a=Object(O.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)({}),i=Object(O.a)(l,2),m=i[0],s=i[1],f=Object(u.b)(),d=function(e){return o(Object(re.a)(Object(re.a)({},c),{},Object(ne.a)({},e.target.name,e.target.value)))};return r.a.createElement(r.a.Fragment,null,r.a.createElement(v.a,{style:{marginTop:"10em"},container:!0,direction:"column",justify:"space-between",spacing:4,alignContent:"center"},r.a.createElement(g.a,{variant:"h5"},"Add an item"),r.a.createElement("form",{action:"/items/add",method:"post",encType:"multipart/form-data"},r.a.createElement(ce.a,null,r.a.createElement(v.a,{item:!0},r.a.createElement(j.a,{label:"Product name",autoComplete:"off",name:"ProductName",fullWidth:!0,onChange:d})),r.a.createElement(v.a,{item:!0},r.a.createElement(j.a,{type:"number",label:"Price",name:"Price",size:"small",onChange:d})),r.a.createElement(v.a,{item:!0},r.a.createElement(j.a,{name:"Desc",label:"Product Description",fullWidth:!0,multiline:!0,onChange:d,rows:8})),r.a.createElement(v.a,{item:!0},"Image :"," ",r.a.createElement("input",{type:"file",name:"image",onChange:function(e){return s({file:e.target.files[0]})}}),r.a.createElement(y.a,null,r.a.createElement(Ie.a,{onClick:function(t){var a=m.file;t.preventDefault();var n=localStorage.getItem("token"),r=new FormData;for(var o in r.append("image",a),c)r.append(o,c[o]);U.a.post("/items/add",r,{headers:{Authorization:"Bearer ".concat(n)}}).then((function(t){e.history.push("/"),f(K()),f(J("Item Added !","success"))}))}})))))))};var Ce=function(e){var t=Object(u.c)((function(e){return e.User})),a=e.match.params.username,c=Object(u.b)(),o=Object(n.useState)(null),l=Object(O.a)(o,2),i=l[0],m=l[1];return Object(n.useEffect)((function(){U.a.get("/user/".concat(a||t.username)).then((function(e){var t=e.data;return t.error&&a?c(J("User not found","error")):m(t)}))}),[t,i]),console.log(i),i&&i.username?r.a.createElement(v.a,null,r.a.createElement(g.a,{variant:"h6"},i.username==t.username?"You":i.username," has"," ",i.Items.length," listed item"),r.a.createElement("hr",null),r.a.createElement(v.a,{container:!0,spacing:4,direction:"row"},i.Items.map((function(e){return r.a.createElement(v.a,{item:!0,xs:12,md:4},r.a.createElement(ye,{item:e,owner:i.username==t.username,profile:i.username!=t.username}))})))):null};function Se(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("center",null,r.a.createElement("img",{src:"http://www.ewb-international.org/wp-content/uploads/2020/09/paypal-smart-payment-button-for-simple-membership.jpg",width:"150",height:"80",style:{position:"relative",bottom:"0px"}})))}var Ae=function(e){var t,a=Object(u.c)((function(e){return e.Cart})),c=0,o=Object(u.b)();return Object(n.useEffect)((function(){o((function(e){U.a.get("/cart",{headers:{Authorization:"Bearer ".concat(Ee)}}).then((function(t){var a=t.data;return e(pe(a))}))}))}),[]),(null===(t=a.items)||void 0===t?void 0:t.length)>0?r.a.createElement(r.a.Fragment,null,r.a.createElement(ce.a,{style:{width:"50vh",margin:"0 auto"}},r.a.createElement(v.a,{container:!0,direction:"column",spacing:3},a.items.map((function(e){return c+=e.Price,r.a.createElement(v.a,{item:!0,key:e._id},r.a.createElement("b",{style:{marginLeft:"5"}},e.ProductName," | Price : ",e.Price," ",r.a.createElement(y.a,{onClick:function(){return o(ge(e._id))}},r.a.createElement(de.a,{color:"error"})," ")))}))),r.a.createElement(h.a,{color:"primary",onClick:function(){return window.open("https://paypal.com/","_blank").focus()}},"Buy"),r.a.createElement("p",{style:{float:"right"}},"Total = ",r.a.createElement("b",null,c,"$")),r.a.createElement(Se,null))):r.a.createElement("p",null,"No items")},Te=a(61);var _e=function(e){var t=e.component,a=Object(Te.a)(e,["component"]);return Object(u.c)((function(e){return e.User.Token}))?r.a.createElement(te.b,Object.assign({component:t},a)):r.a.createElement(te.a,{to:"/login"})};var De=function(e){var t=e.component,a=Object(Te.a)(e,["component"]);return Object(u.c)((function(e){return e.User.Token}))?r.a.createElement(te.a,{to:"/"}):r.a.createElement(te.b,Object.assign({component:t},a))};var ze=function(){var e=Object(u.b)(),t=localStorage.getItem("token");return Object(n.useEffect)((function(){t&&e(Q(t))}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(ee,null),r.a.createElement(ae,null),r.a.createElement(te.d,null,r.a.createElement(te.b,{path:"/",exact:!0,component:we}),r.a.createElement(_e,{path:"/add",exact:!0,component:xe}),r.a.createElement(_e,{path:"/profile/:username",exact:!0,component:Ce}),r.a.createElement(_e,{path:"/profile",exact:!0,component:Ce}),r.a.createElement(De,{path:"/login",component:oe}),r.a.createElement(_e,{path:"/checkout",component:Ae})))},Pe=a(52),Be=Object(i.c)({Alert:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case F:return t.alert;default:return e}},Items:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case N:return Object(Pe.a)(t.data);case R:return e.filter((function(e){return e._id!=t.id}));default:return e}},Cart:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{count:0},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case M:return Object(re.a)(Object(re.a)({},e),{},{count:e.count+1});case G:return Object(re.a)(Object(re.a)({},e),{},{items:t.data?Object(Pe.a)(t.data):[]});case W:return Object(re.a)(Object(re.a)({},e),{},{items:Object(Pe.a)(e.items).filter((function(e){return e._id!=t.id}))});default:return e}},User:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Y:return Object(re.a)({},t.payload);case q:return{};default:return e}}}),Le=Object(i.d)(Be,Object(i.a)(m.a,f.a));o.a.render(r.a.createElement(u.a,{store:Le},r.a.createElement(l.a,null,r.a.createElement(d.a,{anchorOrigin:{vertical:"top",horizontal:"right"},autoHideDuration:2e3},r.a.createElement(ze,null)))),document.getElementById("root"))}},[[106,1,2]]]);
//# sourceMappingURL=main.268012cb.chunk.js.map